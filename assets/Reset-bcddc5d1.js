import{d as C,u as N,r as t,m as S,c as _,a,b as e,w as l,e as I,f as s,l as K,n as L,g as r,o as h,i as v,j as F,p as M,k as T,R as U,F as W,h as j}from"./index-beed6da6.js";const z={class:"card bg-light rounded-2 overflow-visible mt-4 light-shadow-4 mb-4"},H=a("div",{class:"robot"},null,-1),J=a("h1",{class:"card-header text-center my-2 font-s5 font-w500"},"Reset my password",-1),X={class:"card-content"},D={class:"d-flex fx-center my-4 captcha"},G={class:"card-footer pb-0 px-0"},O={key:0,class:"spinner spinner-small text-primary"},Q=a("svg",{viewBox:"25 25 50 50"},[a("circle",{class:"spinner-path",cx:"50",cy:"50",r:"20",fill:"none","stroke-width":"3"})],-1),Y=[Q],ee=C({__name:"Reset",setup(Z){const u=N(),n=K(),b=L(),g="6LcggW0kAAAAAIBPh7SXqoEofNWpSmibvJIfHEoh",o=t({}),y=t(),c=t(!1),x=t(""),w=t(null),R=d=>{x.value=d,c.value=!0},V=()=>{c.value=!1},E=()=>{c.value=!1},q=d=>d===o.value.password||"Password doesn't match",k=()=>{y.value.validate()&&(u.resetPassword(o.value,x.value),w.value.reset())};return S(()=>{if(!n.query.email||!n.query.token)return b.push({name:"login"});o.value.email=n.query.email,o.value.token=n.query.token}),(d,i)=>{const m=r("ax-form-control"),p=r("ax-form-field"),A=r("ax-form"),P=r("Icon"),B=r("ax-btn");return h(),_("div",z,[H,J,a("div",X,[e(A,{ref_key:"form",ref:y,class:"mt-4",onKeypress:I(T(k,["prevent"]),["enter"])},{default:l(()=>[e(p,{label:"Email*"},{default:l(()=>[e(m,{type:"email",modelValue:o.value.email,"onUpdate:modelValue":i[0]||(i[0]=f=>o.value.email=f),readonly:"",rules:[s(v),s(F)]},null,8,["modelValue","rules"])]),_:1}),e(p,{label:"Password*"},{default:l(()=>[e(m,{type:"password",modelValue:o.value.password,"onUpdate:modelValue":i[1]||(i[1]=f=>o.value.password=f),lazy:"",rules:[s(v),s(M)]},null,8,["modelValue","rules"])]),_:1}),e(p,{label:"Confirm Password*"},{default:l(()=>[e(m,{type:"password",rules:[s(v),q]},null,8,["rules"])]),_:1})]),_:1},8,["onKeypress"]),a("div",D,[e(s(U),{ref_key:"captcha",ref:w,sitekey:s(g),"load-recaptcha-script":!0,theme:"dark",onVerify:R,onExpired:E,onError:V},null,8,["sitekey"])])]),a("div",G,[e(B,{class:"w100 primary d-flex fx-center vcenter",onClick:k,disabled:s(u).isLoading||!c.value},{default:l(()=>[s(u).isLoading?(h(),_("div",O,Y)):(h(),_(W,{key:1},[j(" Reset my password "),e(P,{icon:"bx:log-in",class:"ml-1"})],64))]),_:1},8,["disabled"])])])}}});export{ee as default};
