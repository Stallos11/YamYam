import{D as n,E as c,u as h}from"./index-1544c40c.js";const d=n("tickets",{state:()=>({isLoading:!1,tickets:[],ticketCreate:{title:"",message:"",userId:""},selectedTicket:{},selectedTicketResponses:[]}),actions:{async getTicket(e){this.isLoading=!0,this.axios.get(`tickets/${e}`).then(t=>{this.selectedTicket=t.data.ticket}).catch(t=>console.error(t)).finally(()=>this.isLoading=!1)},async getTicketResponses(e){this.isLoading=!0,this.axios.get(`tickets/${e}/responses`).then(t=>{this.selectedTicketResponses=t.data.responses}).catch(t=>console.error(t)).finally(()=>this.isLoading=!1)},async insertResponse(e){this.isLoading=!0,this.axios.post(`tickets/${this.selectedTicket.id}/responses`,{msg:e}).then(()=>{this.getTicketResponses(this.selectedTicket.id)}).catch(t=>console.error(t)).finally(()=>this.isLoading=!1)},async getTickets(){this.isLoading=!0;const e=c();return await this.axios.get("tickets/from").then(t=>{this.tickets=t.data}).catch(t=>{console.error(t),t.response&&e.setError(t.response.data.msg)}).finally(()=>{this.isLoading=!1})},async createTicket(){var i,a,o,r;this.isLoading=!0;const e=c(),t=h();if(!((((a=(i=this.ticketCreate)==null?void 0:i.message)==null?void 0:a.length)||0)<2||(((r=(o=this.ticketCreate)==null?void 0:o.title)==null?void 0:r.length)||0)<2))return this.ticketCreate.userId=t.user.id,await this.axios.post("tickets",{ticket:this.ticketCreate}).then(s=>{this.toast.showToast("Info",s.data.msg,"blue","")}).catch(s=>{console.error(s),s.response&&e.setError(s.response.data.msg)}).finally(()=>{this.ticketCreate={title:"",message:""},this.isLoading=!1})}}});export{d as u};
