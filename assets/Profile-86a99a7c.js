import{d as E,u as T,v as U,E as z,y as C,o as N,c as R,a as s,t as d,f as e,b as o,w as n,g as w,e as u,k as S,j as r}from"./index-1f826056.js";import{u as D}from"./ticket-bb520c98.js";const I={class:"container mt-5"},P={class:"profile-card p-3 rounded-2"},j=s("h2",{class:"my-2"},"Compte",-1),q={class:"profile-card p-3 rounded-2 my-3"},A=s("h2",{class:"my-2"},"Envoyer ticket",-1),F=s("span",{class:"text-grey text-center"},"Un bug ? Une idée de fonctionnalité ? Contactez nous",-1),L={class:"my-5 d-flex fx-center"},K=E({__name:"Profile",setup(G){const _=T(),a=D(),l=U();z(async()=>{await l.getRecipes(),await l.getFavourites()});const V=async()=>{await a.createTicket()},p=C(()=>l.recipes.filter(i=>{var t;return i.user_id===((t=_.user)==null?void 0:t.id)}).length),f=C(()=>l.recipes.filter(i=>{var t;return(t=l.favourites)==null?void 0:t.some(c=>i.id===c.recipe_id)}).length);return(i,t)=>{const c=r("ax-form-control"),x=r("ax-form-field"),g=r("Icon"),k=r("ax-btn"),M=r("ax-form"),B=r("router-link");return N(),R("div",I,[s("div",P,[j,s("ul",null,[s("li",null,d(e(p))+" recettes créées"+d(e(p)<2?"":"s"),1),s("li",null,d(e(f))+" recettes favorites"+d(e(f)<2?"":"s"),1)])]),s("div",q,[A,F,o(M,{onSubmit:S(V,["prevent"]),class:"mt-4"},{default:n(()=>{var y,h,v,b;return[o(x,{label:"Titre"},{default:n(()=>[o(c,{tag:"input",rules:[e(w)],modelValue:e(a).ticketCreate.title,"onUpdate:modelValue":t[0]||(t[0]=m=>e(a).ticketCreate.title=m),type:"text"},null,8,["rules","modelValue"])]),_:1}),o(x,{label:"Messsage"},{default:n(()=>[o(c,{rules:[e(w)],modelValue:e(a).ticketCreate.message,"onUpdate:modelValue":t[1]||(t[1]=m=>e(a).ticketCreate.message=m),tag:"textarea"},{default:n(()=>[u("Message")]),_:1},8,["rules","modelValue"])]),_:1}),o(k,{disabled:(((h=(y=e(a).ticketCreate)==null?void 0:y.message)==null?void 0:h.length)||0)<2||(((b=(v=e(a).ticketCreate)==null?void 0:v.title)==null?void 0:b.length)||0)<2,class:"primary d-flex rounded-1 mx-auto mt-3",size:"small"},{default:n(()=>[o(g,{class:"mr-1",icon:"material-symbols:mail-outline",width:"20"}),u(" Envoyer ")]),_:1},8,["disabled"])]}),_:1},8,["onSubmit"])]),s("div",L,[o(B,{class:"btn py-2 rounded-1 tertiary mx-auto text-white",to:"/tickets"},{default:n(()=>[u("Mes tickets")]),_:1}),o(k,{onClick:S(e(_).logout,["prevent"]),class:"red py-2 dark-1 d-flex rounded-1 mx-auto",size:"small"},{default:n(()=>[o(g,{class:"mr-1",icon:"material-symbols:power-rounded",width:"20"}),u(" Déconnexion ")]),_:1},8,["onClick"])])])}}});export{K as default};
