import{u as y}from"./ticket-0e69e39c.js";import{d as S,u as w,E as D,r as f,m as b,o as r,c,a as e,t as o,f as s,F as L,x as R,z as V,b as i,w as d,e as C,k as E,j as u}from"./index-c0e1a657.js";const B={class:"container"},N={class:"d-flex vcenter"},z={class:"w100"},F={class:"d-flex"},H={class:""},j={class:"ml-auto"},A={class:"grey dark-1 p-3 rounded-2 my-2 light-shadow-2 ml-5"},I={class:"text-right font-s1 mb-0"},M={class:"text-right font-s1 mb-0"},P={class:"my-5"},K=S({__name:"TicketDetails",setup(U){const t=y(),v=w(),g=D(),_=E(),a=f(""),l=f();b(()=>{t.getTicket(_.params.id),t.getTicketResponses(_.params.id),setTimeout(()=>{l.value.scrollTop=l.value.scrollHeight,a.value=""},300)});const h=async()=>{if(a.value.length<2){g.setError("Invalid response");return}await t.insertResponse(a.value),setTimeout(()=>{l.value.scrollTop=l.value.scrollHeight,a.value=""},300)};return(q,m)=>{const k=u("ax-form-control"),x=u("ax-form-field"),T=u("ax-form");return r(),c("div",B,[e("div",N,[e("div",z,[e("h2",null,o(s(t).selectedTicket.title),1),e("div",F,[e("p",H,o(s(t).selectedTicket.status),1),e("p",j,o(new Date(s(t).selectedTicket.created_at).toLocaleDateString()),1)])])]),e("div",{ref_key:"conv",ref:l,class:"conv px-2"},[e("div",A,[e("p",null,o(s(t).selectedTicket.message),1),e("p",I,o(new Date(s(t).selectedTicket.created_at).toLocaleTimeString()+" "+new Date(s(t).selectedTicket.created_at).toLocaleDateString()),1)]),(r(!0),c(L,null,R(s(t).selectedTicketResponses,n=>{var p;return r(),c("div",{class:V([n.user_id==((p=s(v).user)==null?void 0:p.id)?"ml-5 grey dark-1":"mr-5 grey dark-4","p-3 rounded-2 my-2 light-shadow-2"])},[e("p",null,o(n.message),1),e("p",M,o(new Date(n.created_at).toLocaleTimeString()+" "+new Date(n.created_at).toLocaleDateString()),1)],2)}),256))],512),e("div",P,[i(T,null,{default:d(()=>[i(x,{label:"Response"},{default:d(()=>[i(k,{modelValue:a.value,"onUpdate:modelValue":m[0]||(m[0]=n=>a.value=n),tag:"textarea"},{default:d(()=>[C("Put your response here")]),_:1},8,["modelValue"])]),_:1})]),_:1}),e("button",{onClick:h,class:"btn primary rounded-2 px-4 py-1"},"Send response")])])}}});export{K as default};
