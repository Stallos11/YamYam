import{d as C,u as N,r as t,m as S,o as _,c as h,a,b as e,w as r,f as s,g as v,h as I,p as K,i as L,R as F,F as M,e as T,k as U,n as W,j as l,l as j}from"./index-3b3cb201.js";const z={class:"h100 d-flex fx-center vcenter auth-card"},H={class:"card bg-dark rounded-2 overflow-visible mt-4 light-shadow-4 mb-4"},J=a("div",{class:"robot"},null,-1),X=a("h1",{class:"card-header text-center my-2 font-s5 font-w500"},"Reset my password",-1),D={class:"card-content"},G={class:"d-flex fx-center my-4 captcha"},O={class:"card-footer pb-0 px-0"},Q={key:0,class:"spinner spinner-small text-primary"},Y=a("svg",{viewBox:"25 25 50 50"},[a("circle",{class:"spinner-path",cx:"50",cy:"50",r:"20",fill:"none","stroke-width":"3"})],-1),Z=[Y],se=C({__name:"Reset",setup($){const u=N(),n=U(),b=W(),g="6LcggW0kAAAAAIBPh7SXqoEofNWpSmibvJIfHEoh",o=t({}),y=t(),c=t(!1),x=t(""),w=t(null),R=d=>{x.value=d,c.value=!0},V=()=>{c.value=!1},E=()=>{c.value=!1},q=d=>d===o.value.password||"Password doesn't match",k=()=>{y.value.validate()&&(u.resetPassword(o.value,x.value),w.value.reset())};return S(()=>{if(!n.query.email||!n.query.token)return b.push({name:"login"});o.value.email=n.query.email,o.value.token=n.query.token}),(d,i)=>{const m=l("ax-form-control"),p=l("ax-form-field"),A=l("ax-form"),P=l("Icon"),B=l("ax-btn");return _(),h("div",z,[a("div",H,[J,X,a("div",D,[e(A,{ref_key:"form",ref:y,class:"mt-4",onKeypress:L(j(k,["prevent"]),["enter"])},{default:r(()=>[e(p,{label:"Email*"},{default:r(()=>[e(m,{type:"email",modelValue:o.value.email,"onUpdate:modelValue":i[0]||(i[0]=f=>o.value.email=f),readonly:"",rules:[s(v),s(I)]},null,8,["modelValue","rules"])]),_:1}),e(p,{label:"Password*"},{default:r(()=>[e(m,{type:"password",modelValue:o.value.password,"onUpdate:modelValue":i[1]||(i[1]=f=>o.value.password=f),lazy:"",rules:[s(v),s(K)]},null,8,["modelValue","rules"])]),_:1}),e(p,{label:"Confirm Password*"},{default:r(()=>[e(m,{type:"password",rules:[s(v),q]},null,8,["rules"])]),_:1})]),_:1},8,["onKeypress"]),a("div",G,[e(s(F),{ref_key:"captcha",ref:w,sitekey:s(g),"load-recaptcha-script":!0,theme:"dark",onVerify:R,onExpired:E,onError:V},null,8,["sitekey"])])]),a("div",O,[e(B,{class:"w100 primary d-flex fx-center vcenter",onClick:k,disabled:s(u).isLoading||!c.value},{default:r(()=>[s(u).isLoading?(_(),h("div",Q,Z)):(_(),h(M,{key:1},[T(" Reset my password "),e(P,{icon:"bx:log-in",class:"ml-1"})],64))]),_:1},8,["disabled"])])])])}}});export{se as default};
