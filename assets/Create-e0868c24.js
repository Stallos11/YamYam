import{_ as M,a as Q,b as q}from"./IngredientSearchTable.vue_vue_type_style_index_0_lang-713f3ac9.js";import{d as U,r as O,o as x,s as z,w as a,a as t,t as g,b as n,j as m,v as S,m as H,c as C,f as i,F as w,x as D,e as h,y as R,z as V}from"./index-638b287d.js";import{u as G,a as j}from"./recipeCategories-2691b13c.js";const J={class:"time-field"},F=U({__name:"Timepicker",props:["label"],emits:["emitValue"],setup($,{emit:r}){const s=$,v=O(""),k=c=>{r("emitValue",v.value)};return(c,p)=>{const y=m("VueTimepicker"),l=m("ax-form");return x(),z(l,null,{default:a(()=>[t("div",J,[t("label",null,g(s.label),1),n(y,{onClose:p[0]||(p[0]=f=>k(f)),class:"mb-3 time-control","close-on-complete":"",modelValue:v.value,"onUpdate:modelValue":p[1]||(p[1]=f=>v.value=f),"minute-interval":5},null,8,["modelValue"])])]),_:1})}}});const K={class:"d-flex h100"},W={class:"grix xs1 md2 gutter-xs5"},X=U({__name:"GeneralTab",setup($){const r=S(),s=G(),v=j(),k=O(),c=O(),p=(f,e)=>{r.recipeCreate.recipe[f]=e},y=O([1,2,3,4,5]);H(()=>{v.fetchData().then(f=>{c.value=v.recipe_categories.map(e=>({name:e.category,value:e.id,disabled:!1,selected:!1}))}),s.fetchData().then(f=>{k.value=s.recipe_types.map(e=>({name:e.type,value:e.id,disabled:!1,selected:!1}))})});const l=f=>{var e;f.target.files[0]!=null&&((e=r.recipeCreate)!=null&&e.recipe)&&(r.recipeCreate.recipe.image=f.target.files[0])};return(f,e)=>{const o=m("ax-form-control"),_=m("ax-form-field"),b=m("ax-form-select"),d=m("ax-form-file"),I=m("ax-form");return x(),C("div",K,[n(I,{class:"w100"},{default:a(()=>[t("div",W,[n(_,{class:"col-md2 col-xs1",label:"Recipe name"},{default:a(()=>[n(o,{tag:"input",modelValue:i(r).recipeCreate.recipe.name,"onUpdate:modelValue":e[0]||(e[0]=u=>i(r).recipeCreate.recipe.name=u),type:"text",class:"mb-5"},null,8,["modelValue"])]),_:1}),n(_,{class:"col-md2 col-xs1",label:"Description"},{default:a(()=>[n(o,{class:"mb-5",modelValue:i(r).recipeCreate.recipe.description,"onUpdate:modelValue":e[1]||(e[1]=u=>i(r).recipeCreate.recipe.description=u),tag:"textarea"},null,8,["modelValue"])]),_:1}),t("div",null,[n(F,{label:"Preparation time",modelValue:i(r).recipeCreate.recipe.preparation_time,"onUpdate:modelValue":e[2]||(e[2]=u=>i(r).recipeCreate.recipe.preparation_time=u),onEmitValue:e[3]||(e[3]=u=>p("preparation_time",u))},null,8,["modelValue"])]),t("div",null,[n(F,{label:"Cooking time",modelValue:i(r).recipeCreate.recipe.cooking_time,"onUpdate:modelValue":e[4]||(e[4]=u=>i(r).recipeCreate.recipe.cooking_time=u),onEmitValue:e[5]||(e[5]=u=>p("cooking_time",u))},null,8,["modelValue"])]),t("div",null,[n(_,{label:"Dificulty"},{default:a(()=>[n(b,{items:y.value,modelValue:i(r).recipeCreate.recipe.difficulty,"onUpdate:modelValue":e[6]||(e[6]=u=>i(r).recipeCreate.recipe.difficulty=u)},null,8,["items","modelValue"])]),_:1})]),t("div",null,[n(_,{label:"Eaters amount"},{default:a(()=>[n(o,{tag:"input",modelValue:i(r).recipeCreate.recipe.eaters_amount,"onUpdate:modelValue":e[7]||(e[7]=u=>i(r).recipeCreate.recipe.eaters_amount=u),type:"number",min:"0",class:"mb-5"},null,8,["modelValue"])]),_:1})]),t("div",null,[n(_,{label:"Category"},{default:a(()=>[n(b,{items:c.value,modelValue:i(r).recipeCreate.recipe.recipe_category_id,"onUpdate:modelValue":e[8]||(e[8]=u=>i(r).recipeCreate.recipe.recipe_category_id=u)},null,8,["items","modelValue"])]),_:1})]),t("div",null,[n(_,{label:"Type"},{default:a(()=>[n(b,{items:k.value,modelValue:i(r).recipeCreate.recipe.recipe_type_id,"onUpdate:modelValue":e[9]||(e[9]=u=>i(r).recipeCreate.recipe.recipe_type_id=u)},null,8,["items","modelValue"])]),_:1})]),t("div",null,[n(d,{label:"Upload",onChange:l,"label-classes":"btn airforce dark-1 rounded-1"})])])]),_:1})])}}}),Y={class:"grix xs1 lg2 gutter-xs3"},Z=t("p",{class:"font-s4 mt-0 bd-b-solid bd-white bd-2 pb-2"},"Ingredient list",-1),ee={class:"grix xs4 gutter-xs3 vcenter center"},te=["href"],ne=["src"],oe=U({__name:"IngredientTab",setup($){const r=S(),s=["mg","g","kg","mL","cL","L"],v=k=>{r.recipeCreate.ingredients=r.recipeCreate.ingredients.filter(c=>c.id!=k)};return(k,c)=>{const p=m("ax-form-control"),y=m("ax-form-field"),l=m("ax-form-select"),f=m("Icon"),e=m("ax-btn");return x(),C("div",Y,[t("div",null,[Z,(x(!0),C(w,null,D(i(r).recipeCreate.ingredients,(o,_)=>(x(),C("div",{key:o.id,class:"grix xs1 gutter-xs3 vcenter"},[t("p",null,g(o.product_name),1),t("div",ee,[t("a",{target:"_blank",href:`https://fr.openfoodfacts.org/produit/${o.openfoodfact_id}`},[t("img",{class:"rounded-2 ingredient-img",src:o.img},null,8,ne)],8,te),n(y,{label:"Qty"},{default:a(()=>[n(p,{min:"1",tag:"input",modelValue:o.amount,"onUpdate:modelValue":b=>o.amount=b,type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),n(y,{label:"Unit"},{default:a(()=>[n(l,{items:s,modelValue:o.unit,"onUpdate:modelValue":b=>o.unit=b},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),n(e,{onClick:b=>v(o.id),circle:"",small:"",class:"red d-flex vcenter fx-center"},{default:a(()=>[n(f,{icon:"clarity:times-line",width:"20"})]),_:2},1032,["onClick"])])]))),128))]),t("div",null,[n(M),n(Q)])])}}}),ie={class:"grix xs1 lg2 gutter-xs3"},se=t("p",{class:"font-s4 bd-b-solid bd-2 bd-white pb-2 mt-0"},"Instructions",-1),re={class:"d-flex fx-col mb-5"},le={class:"p-4"},ae=U({__name:"PreparationTab",setup($){const r=S(),s=O({title:"",description:""}),v=()=>{s.value.title=s.value.title.trim(),s.value.description=s.value.description.trim(),!(!s.value.title.length||!s.value.description.length)&&(r.addInstructionToCreateRecipe(s.value),s.value={title:"",description:""})},k=c=>{r.recipeCreate.instructions.splice(c,1)};return(c,p)=>{const y=m("ax-form-control"),l=m("ax-form-field"),f=m("ax-btn");return x(),C("div",ie,[t("div",null,[se,(x(!0),C(w,null,D(i(r).recipeCreate.instructions,(e,o)=>(x(),C("div",re,[n(l,{label:"Title"},{default:a(()=>[n(y,{tag:"input",modelValue:e.title,"onUpdate:modelValue":_=>e.title=_,type:"text"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),n(l,{label:"Description"},{default:a(()=>[n(y,{tag:"textarea",modelValue:e.description,"onUpdate:modelValue":_=>e.description=_,type:"text"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),n(f,{onClick:_=>k(o),class:"red font-s2 d-block ml-auto rounded-3 px-5 py-1"},{default:a(()=>[h(" DELETE ")]),_:2},1032,["onClick"])]))),256))]),t("div",le,[n(l,{label:"Title"},{default:a(()=>[n(y,{tag:"input",modelValue:s.value.title,"onUpdate:modelValue":p[0]||(p[0]=e=>s.value.title=e),type:"text"},null,8,["modelValue"])]),_:1}),n(l,{label:"Description"},{default:a(()=>[n(y,{tag:"textarea",modelValue:s.value.description,"onUpdate:modelValue":p[1]||(p[1]=e=>s.value.description=e),type:"text"},null,8,["modelValue"])]),_:1}),n(f,{disabled:!s.value.title.length||!s.value.description.length,onClick:p[2]||(p[2]=e=>v()),class:"btn my-5 primary rounded-3 px-5 py-2 text-white d-block mx-auto"},{default:a(()=>[h("ADD")]),_:1},8,["disabled"])])])}}}),ce={class:"p-4 grix xs1 lg2 gutter-xs4"},de={class:"font-s5"},pe={class:"grix xs2 md12 gutter-xs5 font-s3 mt-4"},ue={class:"d-flex vcenter"},me={class:"d-flex vcenter"},_e={class:"d-flex vcenter"},fe={class:"d-flex vcenter"},xe={class:"pb-5"},be=t("p",{class:"font-s3 mt-5 text-secondary"},"Ingredients",-1),ge=t("div",{class:"divider white"},null,-1),ve=["href"],ye=["src"],Ce={class:"col-xs2"},ke={class:"mb-0"},Ve={class:"mt-0 text-grey text-light-2"},he=t("p",{class:"font-s3 mt-5 text-secondary"},"Instructions",-1),$e=t("div",{class:"divider white"},null,-1),Te={class:"mt-5"},Ue={class:"mb-0 font-s"},Oe={class:"mt-1"},Ie={class:"d-flex fx-col px-4"},we={key:0,class:"font-s7"},De={key:1,class:"font-s7"},Se=U({__name:"PreviewTab",emits:["switchTab"],setup($,{emit:r}){const s=S(),v=G(),k=j(),c=e=>{r("switchTab",e)},p=R(()=>{var e;return(e=k.recipe_categories.find(o=>o.id===s.recipeCreate.recipe.recipe_category_id))==null?void 0:e.category}),y=R(()=>{var e;return(e=v.recipe_types.find(o=>o.id===s.recipeCreate.recipe.recipe_type_id))==null?void 0:e.type}),l=R(()=>{const e=s.recipeCreate,o=!!e.recipe.name.length,_=!!e.recipe.description.length,b=!!e.recipe.preparation_time.length,d=!!e.recipe.cooking_time.length,I=!!e.recipe.difficulty,u=!!e.recipe.eaters_amount&&e.recipe.eaters_amount>0,N=!!e.recipe.recipe_category_id.length,P=!!e.recipe.recipe_type_id.length,E=!!e.ingredients.length,L=E&&e.ingredients.every(T=>!!(T.amount&&T.unit)),B=!!e.instructions.length,A=B&&e.instructions.every(T=>!(!T.title.trim().length||!T.description.trim().length||!T.title.length||!T.description.length));return{recipeNameOk:o,recipeDescriptionOk:_,recipePreparationTimeOk:b,recipeCookingTimeOk:d,difficultyOk:I,eatersAmountOk:u,categoryOk:N,typeOk:P,ingredientsNotEmpty:E,ingredientsOk:L,instructionsNotEmpty:B,instructionsOk:A,isValid:o&&_&&b&&d&&I&&u&&N&&P&&E&&L&&A}}),f=()=>{l.value.isValid&&s.insert()};return(e,o)=>{const _=m("ax-btn"),b=m("Icon");return x(),C("div",ce,[t("div",null,[t("p",de,g(i(s).recipeCreate.recipe.name||"No name"),1),t("div",null,[n(_,{class:"btn primary px-4 py-1 rounded-3 font-s2 mr-3 mb-3"},{default:a(()=>[h(g(i(p)||"empty cat"),1)]),_:1}),n(_,{class:"btn tertiary px-4 py-1 rounded-3 font-s2"},{default:a(()=>[h(g(i(y)||"empty type"),1)]),_:1})]),t("div",pe,[t("div",ue,[n(b,{icon:"ic:outline-access-time",class:"mr-2 text-secondary"}),t("span",null,g(i(s).recipeCreate.recipe.preparation_time),1)]),t("div",me,[n(b,{icon:"icon-park-outline:cook",class:"mr-2 text-secondary"}),t("span",null,g(i(s).recipeCreate.recipe.cooking_time),1)]),t("div",_e,[n(b,{icon:"mdi:flame",class:"mr-2 text-secondary"}),t("span",null,g(i(s).recipeCreate.recipe.difficulty),1)]),t("div",fe,[n(b,{icon:"mdi:users-group",class:"mr-2 text-secondary"}),t("span",null,g(i(s).recipeCreate.recipe.eaters_amount),1)])]),t("p",xe,g(i(s).recipeCreate.recipe.description),1),be,ge,(x(!0),C(w,null,D(i(s).recipeCreate.ingredients,d=>(x(),C("div",{key:d.id,class:"grix xs3 vcenter mt-5"},[t("a",{target:"_blank",href:`https://fr.openfoodfacts.org/produit/${d.openfoodfact_id}`},[t("img",{class:"rounded-2 ingredient-img",src:d.img},null,8,ye)],8,ve),t("div",Ce,[t("p",ke,g(d.product_name),1),t("p",Ve,[t("span",null,g(d.amount),1),t("span",null,g(d.unit),1)])])]))),128)),he,$e,(x(!0),C(w,null,D(i(s).recipeCreate.instructions,d=>(x(),C("div",Te,[t("p",Ue,g(d.title),1),t("p",Oe,g(d.description),1)]))),256)),n(_,{disabled:!i(l).isValid,onClick:f,class:"mt-3 d-block mx-auto rounded-2 primary rounded-3 px-4 py-1"},{default:a(()=>[h("Validate")]),_:1},8,["disabled"])]),t("div",Ie,[t("p",{class:V(["font-s4",i(l).isValid?"text-green":"text-red"])},[h(" Recipe "+g(i(l).isValid?"valid":"invalid")+" ",1),i(l).isValid?(x(),C("span",we,"👌")):(x(),C("span",De,"🥲"))],2),t("p",{class:V(["cursor-pointer mb-0",i(l).recipeNameOk?"text-green":"text-red"]),onClick:o[0]||(o[0]=d=>c("tab1"))},"Name",2),t("p",{class:V(["cursor-pointer mb-0",i(l).recipeDescriptionOk?"text-green":"text-red"]),onClick:o[1]||(o[1]=d=>c("tab1"))},"Description",2),t("p",{class:V(["cursor-pointer mb-0",i(l).recipePreparationTimeOk?"text-green":"text-red"]),onClick:o[2]||(o[2]=d=>c("tab1"))},"Preparation time",2),t("p",{class:V(["cursor-pointer mb-0",i(l).recipeCookingTimeOk?"text-green":"text-red"]),onClick:o[3]||(o[3]=d=>c("tab1"))},"Cooking time",2),t("p",{class:V(["cursor-pointer mb-0",i(l).difficultyOk?"text-green":"text-red"]),onClick:o[4]||(o[4]=d=>c("tab1"))},"Difficulty",2),t("p",{class:V(["cursor-pointer mb-0",i(l).eatersAmountOk?"text-green":"text-red"]),onClick:o[5]||(o[5]=d=>c("tab1"))},"Eaters amount",2),t("p",{class:V(["cursor-pointer mb-0",i(l).categoryOk?"text-green":"text-red"]),onClick:o[6]||(o[6]=d=>c("tab1"))},"Category",2),t("p",{class:V(["cursor-pointer mb-0",i(l).typeOk?"text-green":"text-red"]),onClick:o[7]||(o[7]=d=>c("tab1"))},"Type",2),t("p",{class:V(["cursor-pointer mb-0",i(l).ingredientsNotEmpty?"text-green":"text-red"]),onClick:o[8]||(o[8]=d=>c("tab2"))},"Ingredients amount / unit",2),t("p",{class:V(["cursor-pointer mb-0",i(l).ingredientsOk?"text-green":"text-red"]),onClick:o[9]||(o[9]=d=>c("tab2"))},"Ingredients valid",2),t("p",{class:V(["cursor-pointer mb-0",i(l).instructionsNotEmpty?"text-green":"text-red"]),onClick:o[10]||(o[10]=d=>c("tab3"))},"Instructions not empty",2),t("p",{class:V(["cursor-pointer mb-0",i(l).instructionsOk?"text-green":"text-red"]),onClick:o[11]||(o[11]=d=>c("tab3"))},"Instructions valid",2)])])}}}),Ee=U({__name:"RecipeCreate",setup($){const r=O(),s=v=>{r.value=v};return(v,k)=>{const c=m("ax-tab-link"),p=m("ax-tab-item"),y=m("ax-tab");return x(),z(y,{modelValue:r.value,"onUpdate:modelValue":k[0]||(k[0]=l=>r.value=l),class:"shadow-1 h100 px-5 pt-2"},{menu:a(()=>[n(c,{href:"#tab1"},{default:a(()=>[h("General")]),_:1}),n(c,{href:"#tab2"},{default:a(()=>[h("Ingredients")]),_:1}),n(c,{href:"#tab3"},{default:a(()=>[h("Instructions")]),_:1}),n(c,{href:"#tab4"},{default:a(()=>[h("Preview")]),_:1})]),default:a(()=>[n(p,{class:"h100 pt-5",id:"tab1"},{default:a(()=>[n(X)]),_:1}),n(p,{class:"h100 pt-5",id:"tab2"},{default:a(()=>[n(oe)]),_:1}),n(p,{class:"h100 pt-5",id:"tab3"},{default:a(()=>[n(ae)]),_:1}),n(p,{class:"h100",id:"tab4"},{default:a(()=>[n(Se,{onSwitchTab:s})]),_:1}),n(q,{type:"create"})]),_:1},8,["modelValue"])}}});const Re={class:"h100"},Ae=U({__name:"Create",setup($){return(r,s)=>(x(),C("div",Re,[n(Ee)]))}});export{Ae as default};
