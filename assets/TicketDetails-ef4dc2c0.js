import{u as w}from"./ticket-2b03827b.js";import{d as D,u as R,G as b,r as h,m as C,y as L,C as V,o as l,c as i,a as e,t as o,f as s,F as B,x as E,z as N,b as d,w as _,e as z,k as F,j as u}from"./index-638b287d.js";const j={class:"container"},A={class:"d-flex vcenter"},G={class:"w100"},H={class:"d-flex"},I={class:""},M={class:"ml-auto"},P={class:"grey dark-1 p-3 rounded-2 my-2 light-shadow-2 ml-5"},U={class:"text-right font-s1 mb-0"},q={class:"text-right font-s1 mb-0"},J={class:"my-5"},W=D({__name:"TicketDetails",setup(K){const t=w(),g=R(),v=b(),m=F(),n=h(""),r=h();C(()=>{t.getTicket(m.params.id),t.getTicketResponses(m.params.id)});const k=async()=>{if(n.value.length<2){v.setError("Invalid response");return}await t.insertResponse(n.value)},x=L(()=>t.selectedTicketResponses);return V(x,(p,c)=>{p.length!==c.length&&setTimeout(()=>{r.value.scrollTop=r.value.scrollHeight,n.value=""},100)}),(p,c)=>{const T=u("ax-form-control"),y=u("ax-form-field"),S=u("ax-form");return l(),i("div",j,[e("div",A,[e("div",G,[e("h2",null,o(s(t).selectedTicket.title),1),e("div",H,[e("p",I,o(s(t).selectedTicket.status),1),e("p",M,o(new Date(s(t).selectedTicket.created_at).toLocaleDateString()),1)])])]),e("div",{ref_key:"conv",ref:r,class:"conv px-2"},[e("div",P,[e("p",null,o(s(t).selectedTicket.message),1),e("p",U,o(new Date(s(t).selectedTicket.created_at).toLocaleTimeString()+" "+new Date(s(t).selectedTicket.created_at).toLocaleDateString()),1)]),(l(!0),i(B,null,E(s(t).selectedTicketResponses,a=>{var f;return l(),i("div",{class:N([a.user_id==((f=s(g).user)==null?void 0:f.id)?"ml-5 grey dark-1":"mr-5 grey dark-4","p-3 rounded-2 my-2 light-shadow-2"])},[e("p",null,o(a.message),1),e("p",q,o(new Date(a.created_at).toLocaleTimeString()+" "+new Date(a.created_at).toLocaleDateString()),1)],2)}),256))],512),e("div",J,[d(S,null,{default:_(()=>[d(y,{label:"Response"},{default:_(()=>[d(T,{modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=a=>n.value=a),tag:"textarea"},{default:_(()=>[z("Put your response here")]),_:1},8,["modelValue"])]),_:1})]),_:1}),e("button",{onClick:k,class:"btn primary rounded-2 px-4 py-1"},"Send response")])])}}});export{W as default};
