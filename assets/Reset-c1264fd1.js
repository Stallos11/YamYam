import{d as B,u as N,r as t,m as T,c as f,a,b as e,w as l,e as A,f as s,l as I,n as S,g as r,o as h,i as v,j as F,p as L,k as M,R as U,F as j,h as z}from"./index-4ac865a5.js";const H={class:"card bg-light rounded-2 overflow-visible mt-4 light-shadow-4 mb-4"},Y=a("div",{class:"robot"},null,-1),D=a("h1",{class:"card-header text-center my-2 font-s5 font-w500"},"Reset my password",-1),G={class:"card-content"},J={class:"d-flex fx-center my-4 captcha"},O={class:"card-footer pb-0 px-0"},Q={key:0,class:"spinner spinner-small text-primary"},W=a("svg",{viewBox:"25 25 50 50"},[a("circle",{class:"spinner-path",cx:"50",cy:"50",r:"20",fill:"none","stroke-width":"3"})],-1),X=[W],ee=B({__name:"Reset",setup(Z){const i=N(),n=I(),b=S(),R={}.VITE_RECAPTCHA_KEY,o=t({}),y=t(),c=t(!1),x=t(""),w=t(null),V=d=>{x.value=d,c.value=!0},g=()=>{c.value=!1},E=()=>{c.value=!1},C=d=>d===o.value.password||"Password doesn't match",k=()=>{y.value.validate()&&(i.resetPassword(o.value,x.value),w.value.reset())};return T(()=>{if(!n.query.email||!n.query.token)return b.push({name:"login"});o.value.email=n.query.email,o.value.token=n.query.token}),(d,u)=>{const m=r("ax-form-control"),p=r("ax-form-field"),P=r("ax-form"),q=r("Icon"),K=r("ax-btn");return h(),f("div",H,[Y,D,a("div",G,[e(P,{ref_key:"form",ref:y,class:"mt-4",onKeypress:A(M(k,["prevent"]),["enter"])},{default:l(()=>[e(p,{label:"Email*"},{default:l(()=>[e(m,{type:"email",modelValue:o.value.email,"onUpdate:modelValue":u[0]||(u[0]=_=>o.value.email=_),readonly:"",rules:[s(v),s(F)]},null,8,["modelValue","rules"])]),_:1}),e(p,{label:"Password*"},{default:l(()=>[e(m,{type:"password",modelValue:o.value.password,"onUpdate:modelValue":u[1]||(u[1]=_=>o.value.password=_),lazy:"",rules:[s(v),s(L)]},null,8,["modelValue","rules"])]),_:1}),e(p,{label:"Confirm Password*"},{default:l(()=>[e(m,{type:"password",rules:[s(v),C]},null,8,["rules"])]),_:1})]),_:1},8,["onKeypress"]),a("div",J,[e(s(U),{ref_key:"captcha",ref:w,sitekey:s(R),"load-recaptcha-script":!0,theme:"dark",onVerify:V,onExpired:E,onError:g},null,8,["sitekey"])])]),a("div",O,[e(K,{class:"w100 primary d-flex fx-center vcenter",onClick:k,disabled:s(i).isLoading||!c.value},{default:l(()=>[s(i).isLoading?(h(),f("div",Q,X)):(h(),f(j,{key:1},[z(" Reset my password "),e(q,{icon:"bx:log-in",class:"ml-1"})],64))]),_:1},8,["disabled"])])])}}});export{ee as default};
